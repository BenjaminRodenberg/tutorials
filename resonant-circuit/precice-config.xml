<?xml version="1.0"?>

<precice-configuration>

  <data:scalar name="Current"  />
  <data:scalar name="Voltage"  />

  <mesh name="MeshCoil" dimensions="2">
    <use-data name="Current" />
    <use-data name="Voltage" />
  </mesh>

  <mesh name="MeshCapacitor" dimensions="2">
    <use-data name="Voltage" />
    <use-data name="Current" />
  </mesh>

  <participant name="Coil">
    <provide-mesh name="MeshCoil" />
    <receive-mesh name="MeshCapacitor" from="Capacitor"/>
    <write-data name="Current"     mesh="MeshCoil" />
    <read-data  name="Voltage" mesh="MeshCoil" />
    <mapping:nearest-neighbor
      direction="write" from="MeshCoil" to="MeshCapacitor" constraint="consistent"/>
    <mapping:nearest-neighbor
      direction="read" from="MeshCapacitor" to="MeshCoil" constraint="consistent"/>
  </participant>

  <participant name="Capacitor">
    <provide-mesh name="MeshCapacitor" />
    <receive-mesh name="MeshCoil" from="Coil"/>
    <write-data name="Voltage"     mesh="MeshCapacitor" />
    <read-data  name="Current" mesh="MeshCapacitor" />
    <mapping:nearest-neighbor
      direction="write" from="MeshCapacitor" to="MeshCoil" constraint="consistent"/>
    <mapping:nearest-neighbor
      direction="read" from="MeshCoil" to="MeshCapacitor" constraint="consistent"/>
  </participant>

  <m2n:sockets acceptor="Coil" connector="Capacitor" exchange-directory=".." />
  
  <coupling-scheme:serial-implicit> 
    <participants first="Coil" second="Capacitor" /> 
    <max-time value="10" />
    <time-window-size value="0.01" />
    <max-iterations value="3" />
    <exchange data="Current" mesh="MeshCoil" from="Coil" to="Capacitor"/>
    <exchange data="Voltage" mesh="MeshCapacitor" from="Capacitor" to="Coil"/>
  </coupling-scheme:serial-implicit>     
</precice-configuration>
